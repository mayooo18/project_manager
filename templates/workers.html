{% extends 'base.html' %}

{% block content %}

<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.zfgoogleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden"
      style="--checkbox-tick-svg: url('data:image/svg+xml,%3csvg viewBox=%270 0 16 16%27 fill=%27rgb(255,255,255)%27 xmlns=%27http://www.w3.org/2000/svg%27%3e%3cpath d=%27M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z%27/%3e%3c/svg%3e'); font-family: Inter, &quot;Noto Sans&quot;, sans-serif;"
    >
      <div class="layout-container flex h-full grow flex-col">
        
        <div class="px-0 flex flex-1 justify-start py-5">
            <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
              <div class="flex flex-wrap justify-between gap-3 p-4">
                <p class="text-[#141414] tracking-light text-[32px] font-bold leading-tight min-w-72">Workers</p>
              </div>
              {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                <div class="px-4">
                  {% for category, message in messages %}
                    <div class="flash-message mb-4 rounded-lg px-4 py-3 text-sm bg-green-100 border border-green-300 text-green-800">
                      {{ message }}
                    </div>
                  {% endfor %}
                </div>
              {% endif %}
            {% endwith %}
            
              <form method="POST" action="{{ url_for('workers') }}">
                {{ form.hidden_tag() }}
                <!-- Name Input -->
                <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
                  <label class="flex flex-col min-w-40 flex-1">
                    <p class="text-[#141414] text-base font-medium leading-normal pb-2">Name</p>
                    <input
                      type="text"
                      name="name"
                      placeholder="Enter name"
                      class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#141414] focus:outline-0 focus:ring-0 border border-[#e0e0e0] bg-white focus:border-[#e0e0e0] h-14 placeholder:text-[#757575] p-[15px] text-base font-normal leading-normal"
                      required
                    />
                  </label>
                </div>
          
           


                <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
                    <label class="flex flex-col min-w-40 flex-1">
                      <p class="text-[#141414] text-base font-medium leading-normal pb-2">Contact</p>
                      <input
                        type="text"
                        name="contact"
                        placeholder="Enter contact"
                        required
                        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#141414] focus:outline-0 focus:ring-0 border border-[#e0e0e0] bg-white focus:border-[#e0e0e0] h-14 placeholder:text-[#757575] p-[15px] text-base font-normal leading-normal"
                      />
                    </label>
                  </div>
                  


                  <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
                    <label class="flex flex-col min-w-40 flex-1">
                      <p class="text-[#141414] text-base font-medium leading-normal pb-2">Hourly Rate</p>
                      <input
                        type="number"
                        name="hourly_rate"
                        step="0.01"
                        placeholder="Enter hourly rate"
                        required
                        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#141414] focus:outline-0 focus:ring-0 border border-[#e0e0e0] bg-white focus:border-[#e0e0e0] h-14 placeholder:text-[#757575] p-[15px] text-base font-normal leading-normal"
                      />
                    </label>
                  </div>
                  



                  <div class="flex items-center gap-2 px-4 py-3">
                    <label for="active" class="text-[#141414] text-base font-normal leading-normal">Active</label>
                    <input
                      type="checkbox"
                      name="active"
                      id="active"
                      value="1"
                      class="h-5 w-5 rounded border-[#e0e0e0] border-2 bg-transparent text-black checked:bg-black checked:border-black checked:bg-[image:--checkbox-tick-svg] focus:ring-0 focus:ring-offset-0 focus:border-[#e0e0e0] focus:outline-none"
                      checked
                    />
                  </div>
                  

            
                  <div class="flex justify-stretch">
                    <div class="flex flex-1 gap-3 flex-wrap px-4 py-3 justify-start">
                      <button
                        type="submit"
                        class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-black text-white text-sm font-bold leading-normal tracking-[0.015em]"
                      >
                        <span class="truncate">Submit</span>
                      </button>
                      <button
                        type="reset"
                        class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#f2f2f2] text-[#141414] text-sm font-bold leading-normal tracking-[0.015em]"
                      >
                        <span class="truncate">Clear</span>
                      </button>
                    </div>
                  </div>

            <h3 class="text-[#141414] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">All Workers</h3>
            <div class="px-4 py-3 @container">
              <div class="flex overflow-hidden rounded-xl border border-[#e0e0e0] bg-white">
                <table class="flex-1">
                  <thead>
                    <tr class="bg-white">
                      <th class="table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-120 px-4 py-3 text-left text-[#141414] w-[400px] text-sm font-medium leading-normal">ID</th>
                      <th class="table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-240 px-4 py-3 text-left text-[#141414] w-[400px] text-sm font-medium leading-normal">Name</th>
                      <th class="table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-360 px-4 py-3 text-left text-[#141414] w-[400px] text-sm font-medium leading-normal">Contact</th>
                      <th class="table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-480 px-4 py-3 text-left text-[#141414] w-[400px] text-sm font-medium leading-normal">
                        Hourly Rate
                      </th>
                      <th class="table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-600 px-4 py-3 text-left text-[#141414] w-60 text-sm font-medium leading-normal">Status</th>
                      <th class="table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-720 px-4 py-3 text-left text-[#141414] w-200 text-[#757575] text-sm font-medium leading-normal">
                        Changes
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for worker in workers %}
                    <tr class="border-t border-t-[#e0e0e0]">
                      <td class="px-4 py-2 w-[400px] text-[#757575] text-sm">{{ worker.id }}</td>
                      <td class="px-4 py-2 w-[400px] text-[#141414] text-sm">{{ worker.name }}</td>
                      <td class="px-4 py-2 w-[400px] text-[#757575] text-sm">{{ worker.contact }}</td>
                      <td class="px-4 py-2 w-[400px] text-[#757575] text-sm">${{ '%.2f'|format(worker.hourly_rate) }}/hr</td>
                      <td class="px-4 py-2 w-0 text-sm">
                        <a href="{{ url_for('toggle_worker', worker_id=worker.id) }}"
                           class="rounded-full h-8 px-4 flex items-center justify-center w-full text-sm font-medium transition
                                  {{ 'bg-green-100 text-green-800' if worker.active else 'bg-red-100 text-red-800' }}">
                          {{ "Active" if worker.active else "Inactive" }}
                        </a>
                      </td>
                      
                      <td class="px-4 py-2 w-60 text-sm flex gap-2 items-center">
                        <!-- Edit link -->
                        <a href="{{ url_for('edit_worker', worker_id=worker.id) }}"
                           class="text-[#757575] font-bold hover:underline text-sm">Edit</a>
                      
                        <!-- Delete form -->
                        <form method="POST" action="{{ url_for('delete_worker', worker_id=worker.id) }}"
                              onsubmit="return confirm('Are you sure you want to delete {{ worker.name }}?');">
                          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                          <button type="submit"
                                  class="text-red-600 font-bold hover:underline text-sm">
                            Delete
                          </button>
                        </form>
                      </td>
                      
                    </tr>
                    {% endfor %}
                  </tbody>
                  
                </table>
              </div>
              <style>
                          @container(max-width:120px){.table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-120{display: none;}}
                @container(max-width:240px){.table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-240{display: none;}}
                @container(max-width:360px){.table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-360{display: none;}}
                @container(max-width:480px){.table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-480{display: none;}}
                @container(max-width:600px){.table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-600{display: none;}}
                @container(max-width:720px){.table-f762b2b5-6065-49ae-8c7c-e8d074ff31ad-column-720{display: none;}}
              </style>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
{% endblock %}
